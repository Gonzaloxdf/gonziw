<template name="panel">
  {{#with settings}}
    {{#if visibility}}
      <div class="col-lg-{{size}} panels-row-miargentina" data-id={{id}} aria-live="polite">
        <div class="panel panel-default panel-border-{{status}} panel-nolink {{#if close}}pclose{{/if}} {{#unless service}}state-loading{{/unless}}">
          {{> panelHeading }}
          <div class="{{#if isEqual action.name 'collapse'}}panel-collapse collapse {{#unless action.currentStatus }}in{{/unless}}{{/if}}" role="tabpanel" id="{{id}}" aria-expanded="{{action.currentStatus}}">
            <div class="panel-body">
              {{#if service.response}}
                {{> Template.dynamic template=bodyTemplate}}
              {{/if}}
              {{#if service.error}}
                {{> errorPanel}}
              {{/if}}
            </div>
            {{#if footer}}
              <div class="panel-footer">
                {{> Template.dynamic template=footer}}
              </div>
            {{/if}}
          </div>
        </div>
      </div>
    {{/if}}
  {{/with}}
</template>

<template name="panelHeading">
  {{#if service}}
    <div class="panel-heading {{#if action.currentStatus}}collapsed{{/if}}" data-toggle="{{#if isEqual action.name 'collapse'}}collapse{{/if}}" data-target="#{{id}}" aria-expanded="{{action.currentStatus}}" aria-controls="{{id}}">
      <div class="row">
        <div class="col-xs-10 col-md-11">
          <h2 class="text-capitalize">{{name}}</h2>
        </div>
        {{#if action}}
          {{#if isEqual action.name 'collapse'}}
            <div class="col-xs-2 col-md-1 text-right">
              <a class="btn-collapse"><i class="fa fa-chevron-up text-muted {{#if action.currentStatus}}collapseGira{{/if}}"></i></a>
            </div>
          {{/if}}
        {{/if}}
      </div>
    </div>
  {{/if}}
</template>
